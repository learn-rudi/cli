<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="RUDI CLI - Universal tool manager for MCP stacks, CLI tools, runtimes, and AI agents. Install and manage tools for Claude Desktop, Codex, and Gemini.">
    <meta name="keywords" content="MCP, Model Context Protocol, Claude, CLI, package manager, AI agents, tool manager, rudi, MCP server, Claude Desktop">
    <title>RUDI CLI - Universal Tool Manager for MCP and AI Agents</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.7;
            color: #1a1a2e;
            background: #f8f9fa;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background: #1a1a2e;
            color: white;
            padding: 60px 20px;
        }

        header .container {
            max-width: 900px;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
            font-weight: 600;
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 25px;
        }

        .header-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .header-links a {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 4px;
            font-size: 0.95em;
            transition: all 0.2s;
        }

        .header-links a:hover {
            background: rgba(255,255,255,0.1);
            border-color: rgba(255,255,255,0.5);
        }

        .header-links a.primary {
            background: white;
            color: #1a1a2e;
            border-color: white;
        }

        .header-links a.primary:hover {
            background: #f0f0f0;
        }

        main {
            padding: 40px 0;
        }

        section {
            background: white;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        h2 {
            color: #1a1a2e;
            font-size: 1.5em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        h3 {
            color: #333;
            font-size: 1.15em;
            margin: 25px 0 12px;
        }

        p {
            margin-bottom: 15px;
            color: #444;
        }

        .install-command {
            background: #1a1a2e;
            color: #e0e0e0;
            padding: 15px 20px;
            border-radius: 6px;
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
            font-size: 1em;
            margin: 20px 0;
        }

        .install-command code {
            color: #7dd3fc;
        }

        pre {
            background: #1a1a2e;
            color: #e0e0e0;
            padding: 20px;
            border-radius: 6px;
            overflow-x: auto;
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
            font-size: 0.9em;
            line-height: 1.5;
            margin: 15px 0;
        }

        pre .comment {
            color: #6b7280;
        }

        code {
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
            background: #f1f5f9;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.9em;
        }

        pre code {
            background: none;
            padding: 0;
        }

        ul, ol {
            margin: 15px 0 15px 25px;
            color: #444;
        }

        li {
            margin-bottom: 8px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        th, td {
            text-align: left;
            padding: 12px;
            border-bottom: 1px solid #eee;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #1a1a2e;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .two-column {
                grid-template-columns: 1fr;
            }
        }

        footer {
            text-align: center;
            padding: 40px 20px;
            color: #666;
            border-top: 1px solid #eee;
            margin-top: 40px;
        }

        footer a {
            color: #1a1a2e;
            text-decoration: none;
            margin: 0 10px;
        }

        footer a:hover {
            text-decoration: underline;
        }

        .nav-internal {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .nav-internal a {
            color: #1a1a2e;
            text-decoration: none;
            padding: 6px 12px;
            background: #f1f5f9;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .nav-internal a:hover {
            background: #e2e8f0;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>RUDI CLI</h1>
            <p>Universal tool manager for MCP stacks, CLI tools, runtimes, and AI agents</p>
            <div class="header-links">
                <a href="https://www.npmjs.com/package/@learnrudi/cli" class="primary">Install from npm</a>
                <a href="https://github.com/learn-rudi/cli">GitHub Repository</a>
                <a href="https://github.com/learn-rudi/registry">Package Registry</a>
            </div>
        </div>
    </header>

    <main class="container">
        <nav class="nav-internal">
            <a href="#installation">Installation</a>
            <a href="#concepts">Core Concepts</a>
            <a href="#usage">Usage</a>
            <a href="#mcp">MCP Integration</a>
            <a href="#packages">Available Packages</a>
            <a href="#troubleshooting">Troubleshooting</a>
        </nav>

        <section id="installation">
            <h2>Installation</h2>
            <p>RUDI requires Node.js 18 or later.</p>
            <div class="install-command">
                <code>npm install -g @learnrudi/cli</code>
            </div>
            <p>The installer creates <code>~/.rudi/</code> and adds shims to <code>~/.rudi/bins/</code>.</p>
            <p>Add to your shell profile (<code>.bashrc</code>, <code>.zshrc</code>, or <code>.profile</code>):</p>
            <pre>export PATH="$HOME/.rudi/bins:$PATH"</pre>
            <p>Reload your shell or run <code>source ~/.bashrc</code> to apply changes.</p>
        </section>

        <section id="concepts">
            <h2>Core Concepts</h2>

            <h3>Shim-Based Architecture</h3>
            <p>Every tool installed through RUDI gets a wrapper script (shim) in <code>~/.rudi/bins/</code>. When you run <code>tsc</code>, the shell finds <code>~/.rudi/bins/tsc</code>, which delegates to the actual TypeScript installation. This provides:</p>
            <ul>
                <li>Clean PATH integration without modifying system directories</li>
                <li>Version isolation per package</li>
                <li>Ownership tracking for clean uninstalls</li>
                <li>Consistent invocation across different package sources</li>
            </ul>

            <h3>Package Sources</h3>
            <p>RUDI supports three installation sources:</p>
            <ul>
                <li><strong>Dynamic npm</strong> (<code>npm:&lt;package&gt;</code>) - Any npm package with a bin field</li>
                <li><strong>Curated Registry</strong> - Pre-configured stacks and binaries with documentation</li>
                <li><strong>Upstream Binaries</strong> - Direct downloads from official sources</li>
            </ul>

            <h3>Secret Management</h3>
            <p>MCP stacks often require API keys and tokens. RUDI stores secrets in <code>~/.rudi/secrets.json</code> with mode 0600 and injects them as environment variables when running stacks. Secrets are never exposed in process listings or written to agent config files.</p>
        </section>

        <section id="usage">
            <h2>Usage</h2>

            <h3>Installing Packages</h3>
            <pre><span class="comment"># Install any npm CLI tool</span>
rudi install npm:typescript       <span class="comment"># Installs tsc, tsserver</span>
rudi install npm:@stripe/cli      <span class="comment"># Installs stripe</span>
rudi install npm:vercel           <span class="comment"># Installs vercel</span>

<span class="comment"># Install from curated registry</span>
rudi install slack                <span class="comment"># MCP stack for Slack</span>
rudi install binary:ffmpeg        <span class="comment"># Upstream ffmpeg binary</span>
rudi install binary:supabase      <span class="comment"># Supabase CLI</span>

<span class="comment"># Install with scripts enabled (when needed)</span>
rudi install npm:puppeteer --allow-scripts</pre>

            <h3>Listing and Searching</h3>
            <pre><span class="comment"># List installed packages</span>
rudi list                <span class="comment"># All installed</span>
rudi list stacks         <span class="comment"># MCP stacks only</span>
rudi list binaries       <span class="comment"># CLI tools only</span>

<span class="comment"># Search the registry</span>
rudi search pdf          <span class="comment"># Search for packages</span>
rudi search --all        <span class="comment"># List all available</span></pre>

            <h3>Managing Secrets</h3>
            <pre>rudi secrets list                      <span class="comment"># Show configured secrets (masked)</span>
rudi secrets set SLACK_BOT_TOKEN       <span class="comment"># Set a secret (prompts for value)</span>
rudi secrets set OPENAI_API_KEY "sk-..." <span class="comment"># Set with value</span>
rudi secrets remove SLACK_BOT_TOKEN    <span class="comment"># Remove a secret</span></pre>

            <h3>Integrating with AI Agents</h3>
            <pre>rudi integrate claude    <span class="comment"># Add stacks to Claude Desktop config</span>
rudi integrate codex     <span class="comment"># Add stacks to Codex config</span>
rudi integrate gemini    <span class="comment"># Add stacks to Gemini config</span>
rudi integrate all       <span class="comment"># Add to all detected agents</span></pre>

            <h3>Maintenance</h3>
            <pre>rudi update              <span class="comment"># Update all packages</span>
rudi update slack        <span class="comment"># Update specific package</span>
rudi remove slack        <span class="comment"># Uninstall a package</span>
rudi doctor              <span class="comment"># Check system health</span>
rudi shims check         <span class="comment"># Validate shim targets</span></pre>
        </section>

        <section id="mcp">
            <h2>How MCP Integration Works</h2>
            <p>When you run <code>rudi integrate claude</code>, RUDI:</p>
            <ol>
                <li>Reads the Claude Desktop config at <code>~/Library/Application Support/Claude/claude_desktop_config.json</code></li>
                <li>Adds entries for each installed stack pointing to <code>~/.rudi/bins/rudi-mcp</code></li>
                <li>Passes the stack ID as an argument</li>
            </ol>

            <p>When Claude invokes the MCP server:</p>
            <ol>
                <li><code>rudi-mcp</code> receives the stack ID</li>
                <li>Loads secrets from <code>~/.rudi/secrets.json</code></li>
                <li>Injects secrets as environment variables</li>
                <li>Spawns the actual MCP server process</li>
                <li>Proxies stdio between Claude and the server</li>
            </ol>

            <p>This architecture keeps secrets local - they are never written to agent configuration files.</p>

            <h3>Directory Structure</h3>
            <pre>~/.rudi/
├── bins/                 <span class="comment"># Shims (add to PATH)</span>
│   ├── tsc              <span class="comment"># → binaries/npm/typescript/...</span>
│   ├── ffmpeg           <span class="comment"># → binaries/ffmpeg/...</span>
│   └── rudi-mcp         <span class="comment"># MCP router for agents</span>
├── stacks/               <span class="comment"># MCP server installations</span>
├── binaries/             <span class="comment"># CLI tool installations</span>
│   ├── ffmpeg/          <span class="comment"># Upstream binary</span>
│   └── npm/             <span class="comment"># Dynamic npm packages</span>
├── runtimes/             <span class="comment"># Language runtimes</span>
├── secrets.json          <span class="comment"># API keys (mode 0600)</span>
├── shim-registry.json    <span class="comment"># Shim ownership tracking</span>
└── rudi.db               <span class="comment"># Local metadata database</span></pre>
        </section>

        <section id="packages">
            <h2>Available Packages</h2>

            <h3>MCP Stacks</h3>
            <table>
                <thead>
                    <tr>
                        <th>Stack</th>
                        <th>Description</th>
                        <th>Required Secrets</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>slack</code></td>
                        <td>Channels, messages, reactions</td>
                        <td>SLACK_BOT_TOKEN</td>
                    </tr>
                    <tr>
                        <td><code>google-workspace</code></td>
                        <td>Gmail, Sheets, Docs, Drive</td>
                        <td>GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET</td>
                    </tr>
                    <tr>
                        <td><code>notion-workspace</code></td>
                        <td>Pages, databases, search</td>
                        <td>NOTION_API_KEY</td>
                    </tr>
                    <tr>
                        <td><code>github</code></td>
                        <td>Issues, PRs, repos, actions</td>
                        <td>GITHUB_TOKEN</td>
                    </tr>
                    <tr>
                        <td><code>postgres</code></td>
                        <td>SQL queries</td>
                        <td>DATABASE_URL</td>
                    </tr>
                    <tr>
                        <td><code>stripe</code></td>
                        <td>Payments, subscriptions</td>
                        <td>STRIPE_SECRET_KEY</td>
                    </tr>
                    <tr>
                        <td><code>openai</code></td>
                        <td>DALL-E, Whisper, TTS</td>
                        <td>OPENAI_API_KEY</td>
                    </tr>
                    <tr>
                        <td><code>google-ai</code></td>
                        <td>Gemini, Imagen</td>
                        <td>GOOGLE_AI_API_KEY</td>
                    </tr>
                </tbody>
            </table>

            <h3>Binaries</h3>
            <table>
                <thead>
                    <tr>
                        <th>Binary</th>
                        <th>Description</th>
                        <th>Source</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>ffmpeg</code></td>
                        <td>Video/audio processing</td>
                        <td>Upstream</td>
                    </tr>
                    <tr>
                        <td><code>ripgrep</code></td>
                        <td>Fast text search</td>
                        <td>Upstream</td>
                    </tr>
                    <tr>
                        <td><code>supabase</code></td>
                        <td>Supabase CLI</td>
                        <td>npm</td>
                    </tr>
                    <tr>
                        <td><code>vercel</code></td>
                        <td>Vercel CLI</td>
                        <td>npm</td>
                    </tr>
                    <tr>
                        <td><code>uv</code></td>
                        <td>Python package manager</td>
                        <td>Upstream</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="troubleshooting">
            <h2>Troubleshooting</h2>

            <h3>Command not found after install</h3>
            <p>Ensure <code>~/.rudi/bins</code> is in your PATH:</p>
            <pre>echo $PATH | grep -q '.rudi/bins' && echo "OK" || echo "Add ~/.rudi/bins to PATH"</pre>

            <h3>Shim points to missing target</h3>
            <p>Run <code>rudi shims check</code> to validate all shims. If a target is missing, reinstall:</p>
            <pre>rudi remove npm:typescript
rudi install npm:typescript</pre>

            <h3>MCP stack not appearing in agent</h3>
            <ol>
                <li>Check the stack is installed: <code>rudi list stacks</code></li>
                <li>Run integration: <code>rudi integrate claude</code></li>
                <li>Restart the AI agent application</li>
            </ol>

            <h3>Permission denied on secrets</h3>
            <pre>chmod 600 ~/.rudi/secrets.json</pre>
        </section>

        <section>
            <h2>Security</h2>
            <p><strong>npm Packages:</strong> Install with <code>--ignore-scripts</code> by default to prevent arbitrary code execution. Use <code>--allow-scripts</code> for packages that require lifecycle scripts.</p>
            <p><strong>Secret Storage:</strong> Secrets are stored with file permissions 0600 (owner read/write only), matching the security model of SSH and AWS CLI.</p>
            <p><strong>Shim Isolation:</strong> Each package installs to its own directory. Shims are thin wrappers that prevent packages from interfering with each other.</p>
        </section>
    </main>

    <footer>
        <p>RUDI CLI - MIT License</p>
        <div>
            <a href="https://github.com/learn-rudi/cli">GitHub</a>
            <a href="https://www.npmjs.com/package/@learnrudi/cli">npm</a>
            <a href="https://github.com/learn-rudi/registry">Registry</a>
            <a href="https://github.com/learn-rudi/cli/issues">Issues</a>
        </div>
    </footer>
</body>
</html>
